---
import { formatDate, readingTime } from "@/lib/utils";
import type { CollectionEntry } from "astro:content";
import { Badge } from "./ui/badge";

interface Props {
  post: CollectionEntry<"blog">;
}
const { post } = Astro.props;
---

<div class="relative flex bg-card outline outline-border rounded-lg p-6 w-full">
  <a href={`/blog/${post.id}/`} class="flex flex-col w-full !text-foreground">
    {
      post.data.heroImage && (
        <img
          width={720}
          height={360}
          src={post.data.heroImage}
          alt=""
          loading="lazy"
          decoding="async"
          class="w-full !h-40 object-cover rounded-lg mb-3"
        />
      )
    }

    <h4 class="!text-white !text-md font-bold">{post.data.title}</h4>
    <p class="text-sm">
      {post.data.description}
    </p>

    <div class="flex justify-between items-center pt-4">
      <p class="text-sm">
        <time datetime={post.data.pubDate.toISOString()}>
          {formatDate(post.data.pubDate)} - {readingTime(post.body)}
        </time>
      </p>
      <div class="flex gap-2">
        {post.data.tags.map((tag) => <Badge key={tag}>#{tag}</Badge>)}
      </div>
    </div>
  </a>
</div>
